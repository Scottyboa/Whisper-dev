(function(_0x4316b7,_0x34f9e8){const _0x22b6b4=_0x3c1d,_0x58aa10=_0x4316b7();while(!![]){try{const _0x39baf6=-parseInt(_0x22b6b4(0x11c,'QmXP'))/0x1+parseInt(_0x22b6b4(0x11e,'KOpu'))/0x2*(-parseInt(_0x22b6b4(0x109,'*iNz'))/0x3)+parseInt(_0x22b6b4(0x104,'Vqqe'))/0x4+parseInt(_0x22b6b4(0xe5,'oR%H'))/0x5+-parseInt(_0x22b6b4(0xfd,'PMi$'))/0x6+-parseInt(_0x22b6b4(0x113,'^nL$'))/0x7*(-parseInt(_0x22b6b4(0x119,'5Ll6'))/0x8)+parseInt(_0x22b6b4(0xcf,'WCNV'))/0x9*(parseInt(_0x22b6b4(0xe4,'p%Dx'))/0xa);if(_0x39baf6===_0x34f9e8)break;else _0x58aa10['push'](_0x58aa10['shift']());}catch(_0x210467){_0x58aa10['push'](_0x58aa10['shift']());}}}(_0x3ae3,0x9685b));const _0x1477ac=(function(){let _0x2e24d5=!![];return function(_0x59b548,_0x482210){const _0x5f4947=_0x2e24d5?function(){if(_0x482210){const _0x578b2b=_0x482210['apply'](_0x59b548,arguments);return _0x482210=null,_0x578b2b;}}:function(){};return _0x2e24d5=![],_0x5f4947;};}()),_0x3f3d80=_0x1477ac(this,function(){const _0x382a3b=_0x3c1d;return _0x3f3d80['toString']()['search']('(((.+)+)+)+$')[_0x382a3b(0xb3,'h!WH')]()[_0x382a3b(0xb4,'iQz&')](_0x3f3d80)[_0x382a3b(0xb1,'@oVn')]('(((.+)+)+)+$');});_0x3f3d80();const _0x401916=(function(){let _0x7ca778=!![];return function(_0x31776c,_0x575db0){const _0x27fb22=_0x7ca778?function(){if(_0x575db0){const _0x18e419=_0x575db0['apply'](_0x31776c,arguments);return _0x575db0=null,_0x18e419;}}:function(){};return _0x7ca778=![],_0x27fb22;};}()),_0x1863b7=_0x401916(this,function(){const _0x43e6a8=_0x3c1d;let _0x59bde9;try{const _0x5e13e0=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x59bde9=_0x5e13e0();}catch(_0x3203aa){_0x59bde9=window;}const _0x16a97d=_0x59bde9[_0x43e6a8(0xdd,'p%Dx')]=_0x59bde9[_0x43e6a8(0xbf,'F1&(')]||{},_0x5c045b=['log','warn',_0x43e6a8(0xde,'e%zt'),_0x43e6a8(0xe6,'c4gW'),'exception','table','trace'];for(let _0x5a0033=0x0;_0x5a0033<_0x5c045b['length'];_0x5a0033++){const _0x42c22f=_0x401916['constructor'][_0x43e6a8(0xc7,'8P2p')]['bind'](_0x401916),_0x2b8759=_0x5c045b[_0x5a0033],_0x51e788=_0x16a97d[_0x2b8759]||_0x42c22f;_0x42c22f['__proto__']=_0x401916['bind'](_0x401916),_0x42c22f['toString']=_0x51e788['toString']['bind'](_0x51e788),_0x16a97d[_0x2b8759]=_0x42c22f;}});_0x1863b7();function hashString(_0x945ae5){const _0x4e9e70=_0x3c1d;let _0x56de0f=0x0;for(let _0x1d906e=0x0;_0x1d906e<_0x945ae5['length'];_0x1d906e++){const _0x1a00ef=_0x945ae5['charCodeAt'](_0x1d906e);_0x56de0f=(_0x56de0f<<0x5)-_0x56de0f+_0x1a00ef,_0x56de0f|=0x0;}return(_0x56de0f>>>0x0)[_0x4e9e70(0x112,'WaP4')]();}const DEBUG=!![];function logDebug(_0x33180f,..._0x4a05b9){DEBUG&&console['debug'](new Date()['toISOString'](),'[DEBUG]',_0x33180f,..._0x4a05b9);}function logInfo(_0x37888f,..._0x97f81f){console['info'](new Date()['toISOString'](),'[INFO]',_0x37888f,..._0x97f81f);}function logError(_0x298271,..._0x5baecc){const _0x236cb5=_0x3c1d;console[_0x236cb5(0xd1,'^nL$')](new Date()[_0x236cb5(0x10c,'FDIh')](),'[ERROR]',_0x298271,..._0x5baecc);}function _0x3c1d(_0x82e4f3,_0x3bc07c){const _0x1e3f1a=_0x3ae3();return _0x3c1d=function(_0x1863b7,_0x401916){_0x1863b7=_0x1863b7-0xa9;let _0x1871bb=_0x1e3f1a[_0x1863b7];if(_0x3c1d['JEjEbp']===undefined){var _0x2c9efb=function(_0xabae2d){const _0x153bd0='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x381c92='',_0x1ec357='',_0x35cc3e=_0x381c92+_0x2c9efb;for(let _0x51462a=0x0,_0x2e24d5,_0x59b548,_0x482210=0x0;_0x59b548=_0xabae2d['charAt'](_0x482210++);~_0x59b548&&(_0x2e24d5=_0x51462a%0x4?_0x2e24d5*0x40+_0x59b548:_0x59b548,_0x51462a++%0x4)?_0x381c92+=_0x35cc3e['charCodeAt'](_0x482210+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x2e24d5>>(-0x2*_0x51462a&0x6)):_0x51462a:0x0){_0x59b548=_0x153bd0['indexOf'](_0x59b548);}for(let _0x5f4947=0x0,_0x578b2b=_0x381c92['length'];_0x5f4947<_0x578b2b;_0x5f4947++){_0x1ec357+='%'+('00'+_0x381c92['charCodeAt'](_0x5f4947)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1ec357);};const _0x3c1deb=function(_0x7ca778,_0x31776c){let _0x575db0=[],_0x27fb22=0x0,_0x18e419,_0x59bde9='';_0x7ca778=_0x2c9efb(_0x7ca778);let _0x16a97d;for(_0x16a97d=0x0;_0x16a97d<0x100;_0x16a97d++){_0x575db0[_0x16a97d]=_0x16a97d;}for(_0x16a97d=0x0;_0x16a97d<0x100;_0x16a97d++){_0x27fb22=(_0x27fb22+_0x575db0[_0x16a97d]+_0x31776c['charCodeAt'](_0x16a97d%_0x31776c['length']))%0x100,_0x18e419=_0x575db0[_0x16a97d],_0x575db0[_0x16a97d]=_0x575db0[_0x27fb22],_0x575db0[_0x27fb22]=_0x18e419;}_0x16a97d=0x0,_0x27fb22=0x0;for(let _0x5c045b=0x0;_0x5c045b<_0x7ca778['length'];_0x5c045b++){_0x16a97d=(_0x16a97d+0x1)%0x100,_0x27fb22=(_0x27fb22+_0x575db0[_0x16a97d])%0x100,_0x18e419=_0x575db0[_0x16a97d],_0x575db0[_0x16a97d]=_0x575db0[_0x27fb22],_0x575db0[_0x27fb22]=_0x18e419,_0x59bde9+=String['fromCharCode'](_0x7ca778['charCodeAt'](_0x5c045b)^_0x575db0[(_0x575db0[_0x16a97d]+_0x575db0[_0x27fb22])%0x100]);}return _0x59bde9;};_0x3c1d['HzxNTc']=_0x3c1deb,_0x82e4f3=arguments,_0x3c1d['JEjEbp']=!![];}const _0x3f3d80=_0x1e3f1a[0x0],_0x1477ac=_0x1863b7+_0x3f3d80,_0x3ae3cd=_0x82e4f3[_0x1477ac];if(!_0x3ae3cd){if(_0x3c1d['TZdkyl']===undefined){const _0x5e13e0=function(_0x3203aa){this['PfkbhN']=_0x3203aa,this['yqHZHa']=[0x1,0x0,0x0],this['gAhYpM']=function(){return'newState';},this['hMglAL']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['oJJuJp']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x5e13e0['prototype']['BfOcuT']=function(){const _0x5a0033=new RegExp(this['hMglAL']+this['oJJuJp']),_0x42c22f=_0x5a0033['test'](this['gAhYpM']['toString']())?--this['yqHZHa'][0x1]:--this['yqHZHa'][0x0];return this['ijDHCy'](_0x42c22f);},_0x5e13e0['prototype']['ijDHCy']=function(_0x2b8759){if(!Boolean(~_0x2b8759))return _0x2b8759;return this['gqsKKI'](this['PfkbhN']);},_0x5e13e0['prototype']['gqsKKI']=function(_0x51e788){for(let _0x945ae5=0x0,_0x56de0f=this['yqHZHa']['length'];_0x945ae5<_0x56de0f;_0x945ae5++){this['yqHZHa']['push'](Math['round'](Math['random']())),_0x56de0f=this['yqHZHa']['length'];}return _0x51e788(this['yqHZHa'][0x0]);},new _0x5e13e0(_0x3c1d)['BfOcuT'](),_0x3c1d['TZdkyl']=!![];}_0x1871bb=_0x3c1d['HzxNTc'](_0x1871bb,_0x401916),_0x82e4f3[_0x1477ac]=_0x1871bb;}else _0x1871bb=_0x3ae3cd;return _0x1871bb;},_0x3c1d(_0x82e4f3,_0x3bc07c);}const MIN_CHUNK_DURATION=0x1d4c0,MAX_CHUNK_DURATION=0x1d4c0,watchdogThreshold=0x5dc;let mediaStream=null,processedAnyAudioFrames=![],audioReader=null,recordingStartTime=0x0,accumulatedRecordingTime=0x0,recordingTimerInterval,completionTimerInterval=null,completionStartTime=0x0,groupId=null,chunkNumber=0x1,manualStop=![],transcriptChunks={},pollingIntervals={},chunkStartTime=0x0,lastFrameTime=0x0,chunkTimeoutId,chunkProcessingLock=![],pendingStop=![],finalChunkProcessed=![],recordingPaused=![],audioFrames=[],transcriptionQueue=[],isProcessingQueue=![];function _0x3ae3(){const _0x4d1b92=['W5ONrSo0DmkJWRlcLeBdVr0','omoIf8ktFdJcM8k3W552W6u2W4NcMq','ofNdHCoVA8kNWPlcPuJdQmo6WQBcHSotkHXbWQfEaCoyrmoit8ktk8oirJldP8ktWQfohvlcKmkeWPJcI8k1W7TgWPNdGxTEWP8YuMuoW5n4','WPtdOSkTjCorhCoMW5ldGq','WROMWO4SW441W4ZdKmoN','WQVcSCkzbwJdL1tdMW','k2iDofjOyq','WO7dQCk3fCokj8o3WPVcGW','f1tdNSoMDmoV','lmoZaSkIyaVcKmk3W59/W5m+W5pcNW','q8o3WO3dLG','WONdQmkU','WPxcH8oM','W4BdKbePfW','DYiWisVcTCoUs0i','cv06A1zHFCkXW6rLySkJEf0qAM91WRtcNCkubmoWgrrOA8k1CCkmWQKugeJcGIiWrSk9','mmo4n3KAffVcNSkEW47cOmk9WPtdMq','W4pcU3i3BCkEWOT6W4OvWPZdQmo/WRG','W57dPZ/IGyeOWORcPxJdQuRcLmoRWRxcPmkWr1jjWR7cImoxjdBdL8o+dbWZs3BdR8of','WPnrW6jbW7CVCCoaWQJcUcWcAxpcK8kXW5NcM1TbwZNcPhLNuCkanCk8xL3dUaLVW7BcVSk5W5dcRHyQC8kTWOiaBbTz','yCkUWQBdSSk9W6NdNSoPWRFdT8o8FLy','WQpcVCkea37dKW','W7RdVmkVWO3cPSkmv8kKWOZcH8keW67cKG','nmoLW7BcOmoN','WOyrWOGIW40','W6Sdi8oLrmoReCo4WPm','WPNdNCkFhW','W6nhyHldNf/cGc3dLa','jmoPiKGdaNVcNSkdW4NcG8kJWRG','WOqcWPmJ','DSoJgSkf','qCkkW6TdW5rMW7FcHfZcGCou','WQXrySkdhmk8u8kmW5j1W7VdPLq','aM5oBSoiW53cQCouqSo1W63dRmkJW4BcUdbwW5RcVSoNWPddVW','W6SsnSocwCohemk/W5v5W68','uslcIHtcUG','b23cOmoEgM3cPW','pSoZjvm','WQzvqmkyqvVdVCoeWQSVWR7dOSk8lSopW5SdnefzW54','W5rYkCk2W5HLDt3dGW','y8oxa8khW6FcK8ojWR5M','W5fgdCkYwa','FWL3WRq','vZlcQSoahgBcImoW','WPTIeSkZomorW7FcQuVdTZ0XWOm','W6rSW4KNja','WPJdImkEcWNcNComWR/dImk4','h1JdG8oGySoRWOFcSW','WRBcG8oNW7bmWRveWRKZl8o0W47cK8oTqW','EmoShCkoW5jMm8kTWPK','WO/dS8kTamolsCk9W4ZcLSoaW4STgSkmxSo9wCklwmokW4NdRXNcQCoqW7pdOSoOW53dL8k7W64IW5b3rsvBW7ivtCkdW49yWRxcRG','W5FdJ8oIWOqjcmku','WOlcH8oKW6PkW7bjWQG/k8oJW4q','aI7cIM5pWOBcJSkIDmkLW45SW6ShsemyW5mIjaT/xCk+W7tdUW','rComWQRdVK8HDYZcPSopW7/cUrJdPftdSN7dQCoj','WPZdUIpcUmoNW5nWW5ddQeJcPcSkbq','WRPwa0dcQmoUW7hdTXKzhCkVa8kgW582WPbuWQPkkCkKbW','x8o4WP9V','vZBcSJ4','W7vYpSkmW4nVAgdcLGhcKmkyWPOnB8o7xG','cLeLfbddLCkd','W7j2W5iUiG','WRFdHSkuW51ZiSkKDSo1WOvIfSke','amouWOFcLalcICkGsmomW6/dQCo9','oNHcBW','fSohWP3cIItcS8kKsCo6W63dQmoAgSoZWR8HFG','WOZcRCo0WP7dUtDDl2VcSdBcJmoyWOu3kIn5W57dJNhcLCkTWPxcO3ddNSktj8oEWQvb','WRRcVCoLWPddVZPBlW','W7xdGZD9W7lcR0VcKSo9W7vDW5yP','eCoGWPTJWQPUeIXqEb/cPg7dOmkrW6m','WONdHSkafJlcNW','DcqWjqBcTmoJt0JdLa','s8o4ogjuFSoeWQCpWOBdHSksbN3dP8oyWQ/cQKz3h8kmW53dOaVcJG','gCoZfCkoEG7cL8k3W50ZW6C+W5lcJCoSW7efWOGEWRRdJSo1W47dOmo9W7nEAcS6hwtcOZdcP8kvjZNcGCo1g8kmbeFcSHdcICoFW6mntwNcUSk4WRjZWRpdNZyrWR9rDSk4dGPGWQKGdw/dK8k9cMpdLGrOE8o7WR3cOMm','WOb3BmoDra','WRyfm0JcGKNdGqVdKrZcQLz3','WRpdJmkqW6flkmkkE8o6WP9ocSkHW6a','W6WZWPNdIbOkWPxcUG','zcFcVJnzBSogC8kHWPFdL8kRW7CHuCk9psnVW7isWR8iWPpcV8oxdSoDW7dcMNeJ','iqzrWQCsomkvWRhcRG9nrSofWQZcO8omWQpcPJPdWQddTaauWOzK','W7nFW5HQW5SksW','vvKzpsZdRq','W7DbyWNdRbhcHYxdVrtcTx8','ESoLa15PdCocWRavWP3dJa','yJZcIGtcUGRdISo6gSkpDW','AZuXmJdcQq','ASkSdmk0WRuuW7dcJCkW','ngjEymoyW5xcPCoE','W4RcQ2SuFCkiWQ1ZW5GvWPZdPSoXWRG','W5NcOuWHESkfWQP7','W5fsWRuQW7HirSo0','W5FcTmkqCYZcQq','cvtdKCoLyCoLWO7cSG','WRmpWP8SW4XHiSoYWO4ebSklWOJdTIvWnqldMCojWOldP3dcHWJcNWFcTbGZWQW4d8ofxCkHrmknWOVdImkLW5dcSc3dTxOzlmo7WQxdTCoWWPRcVrD8W7/cVmo7oMtdNJdcIa9c','vsVcKslcSXZdLmo2gSkCfqLqEG','iYBcJwK','cWXgAMRcVmoJWPpdNhxcKYvr','WOddOSkToComfSo/','ne3cNCo5','W77dQSoAxdNcGWpdSCoHjYzJuq','WR/dJmkDW5C','WOxcMmk4W5PBuSoydmkEBa7cNtG','W6z7W48noLy3WPOVWO3dP8kbW7yO','WRnxW75XW7O0ACkuW6W','WOqgWO4FW5PLzSoYWPi','WQz+o8kPomkfW4JdPSkpW5HJ','W5yjD8orwmoHdmkKWOfWW7pdL3RdRr8ek8kqFupdNSkYWRLbrbFcUSkTccVcH8o8AmkxWPBcTdldTcmXWPvAW7tdP8kgfuy','W5JcQ8kx','WO8gWPqQW4TS','W5rJpmkrW4v4vMFcHuK','WPNdJmkejHlcLCo0','zCk/W5X0','WOnGESomq1ddPCkqWQWVWQq','pguwjq','WONdImkeda4','WRVcT8k5ehJdKL/dMa','l2GhdLfHACo0W6r+vmo6ue8','iKtcP8ofWOuJBX0','CteZichcSG','FbLLWQ5DDW','rcFcUq','D8kTmCkLWRuPW7VcKG','CSorWQxdO0GWCcBcSmojW6m','WPaNWO05W5aeW53dGCo8WQVdUvlcKX5vW64NW7KCncpdLXi','W4ddKSoTWOqFcmkscCklEtBcLGBdImoS','W5ldHWazemocW6beWR8','WPVcSCo1W4RcSSoxg8kNWPFcJmkDWOFcT8oysCkLoJy6W5BcNfJcL8oWm8okwSktWOddKrmvFsFdU0BdGJqpf0ddMLK'];_0x3ae3=function(){return _0x4d1b92;};return _0x3ae3();}function updateStatusMessage(_0x267e8d,_0xc0afd7='#333'){const _0x5efc24=_0x3c1d,_0x94e705=document[_0x5efc24(0x11f,'c4gW')](_0x5efc24(0xd5,'e%zt'));_0x94e705&&(_0x94e705[_0x5efc24(0x10f,'h!WH')]=_0x267e8d,_0x94e705['style']['color']=_0xc0afd7);}function formatTime(_0x118561){const _0x1a22d9=_0x3c1d,_0x37c79f=Math['floor'](_0x118561/0x3e8);if(_0x37c79f<0x3c)return _0x37c79f+'\x20sec';else{const _0x33756d=Math['floor'](_0x37c79f/0x3c),_0x2e306c=_0x37c79f%0x3c;return _0x33756d+_0x1a22d9(0xf2,'uI]q')+(_0x2e306c>0x0?'\x20'+_0x2e306c+'\x20sec':'');}}function updateRecordingTimer(){const _0x3ce7b3=_0x3c1d,_0x343b93=accumulatedRecordingTime+(Date['now']()-recordingStartTime),_0x48a3cb=document['getElementById']('recordTimer');_0x48a3cb&&(_0x48a3cb[_0x3ce7b3(0xbd,'$B&7')]=_0x3ce7b3(0xf4,'z%id')+formatTime(_0x343b93));}function stopMicrophone(){const _0x295874=_0x3c1d;mediaStream&&(mediaStream['getTracks']()['forEach'](_0x118a10=>_0x118a10[_0x295874(0xd3,'DT1@')]()),mediaStream=null,logInfo('Microphone\x20stopped.')),audioReader&&(audioReader['cancel'](),audioReader=null);}function arrayBufferToBase64(_0x3ff308){const _0x2b9606=_0x3c1d;let _0x1ecc12='';const _0x2efdfe=new Uint8Array(_0x3ff308);for(let _0x29a09b=0x0;_0x29a09b<_0x2efdfe['byteLength'];_0x29a09b++){_0x1ecc12+=String[_0x2b9606(0xf8,'hi)%')](_0x2efdfe[_0x29a09b]);}return window['btoa'](_0x1ecc12);}function base64ToArrayBuffer(_0x37cdc5){const _0x2f081d=_0x3c1d,_0x499e2e=window[_0x2f081d(0xf3,'@7&Z')](_0x37cdc5),_0x4bf653=_0x499e2e[_0x2f081d(0x10a,'5Ll6')],_0x33f775=new Uint8Array(_0x4bf653);for(let _0x125485=0x0;_0x125485<_0x4bf653;_0x125485++){_0x33f775[_0x125485]=_0x499e2e['charCodeAt'](_0x125485);}return _0x33f775;}function getDeviceToken(){const _0x28e1ca=_0x3c1d;let _0x1e94f6=localStorage[_0x28e1ca(0x11a,'nu8F')](_0x28e1ca(0xed,'l5Iu'));return!_0x1e94f6&&(_0x1e94f6=crypto[_0x28e1ca(0xe7,'DT1@')](),localStorage[_0x28e1ca(0x127,'DT1@')]('device_token',_0x1e94f6)),_0x1e94f6;}function getAPIKey(){const _0x4713bb=_0x3c1d;return sessionStorage['getItem'](_0x4713bb(0x10b,'Vqqe'));}async function encryptFileBlob(_0x201fde){const _0x517ec6=_0x3c1d,_0x181a92=getAPIKey();if(!_0x181a92)throw new Error(_0x517ec6(0xdf,'qnp)'));const _0xa564f0=getDeviceToken(),_0x1a7a3a=hashString(_0x181a92),_0x4d5db9=hashString(_0xa564f0);return{'encryptedBlob':_0x201fde,'iv':'','salt':'','apiKeyMarker':_0x1a7a3a,'deviceMarker':_0x4d5db9};}async function processAudioUsingOfflineContext(_0x23ffe0,_0x54b29e,_0x12189a){const _0x28a740=_0x3c1d,_0xbfdb55=0x3e80,_0x326914=_0x23ffe0['length']/_0x12189a;let _0x38632f=new AudioContext(),_0x2ebaa2=_0x38632f['createBuffer'](_0x12189a,_0x326914,_0x54b29e);if(_0x12189a===0x1)_0x2ebaa2['copyToChannel'](_0x23ffe0,0x0);else for(let _0x1f3558=0x0;_0x1f3558<_0x12189a;_0x1f3558++){let _0x2fd22d=new Float32Array(_0x326914);for(let _0x660978=0x0;_0x660978<_0x326914;_0x660978++){_0x2fd22d[_0x660978]=_0x23ffe0[_0x660978*_0x12189a+_0x1f3558];}_0x2ebaa2[_0x28a740(0xf7,'SZ%z')](_0x2fd22d,_0x1f3558);}let _0x3fa9fb;if(_0x12189a>0x1){let _0x448821=new Float32Array(_0x326914);for(let _0x234c6f=0x0;_0x234c6f<_0x326914;_0x234c6f++){let _0x142e67=0x0;for(let _0xea3c85=0x0;_0xea3c85<_0x12189a;_0xea3c85++){_0x142e67+=_0x2ebaa2[_0x28a740(0xc2,'Ce%B')](_0xea3c85)[_0x234c6f];}_0x448821[_0x234c6f]=_0x142e67/_0x12189a;}_0x3fa9fb=_0x38632f['createBuffer'](0x1,_0x326914,_0x54b29e),_0x3fa9fb['copyToChannel'](_0x448821,0x0);}else _0x3fa9fb=_0x2ebaa2;_0x38632f[_0x28a740(0xdc,'9(Y]')]();const _0x43f00b=_0x3fa9fb[_0x28a740(0xfc,'W%Q!')],_0xd85cbc=new OfflineAudioContext(0x1,_0xbfdb55*_0x43f00b,_0xbfdb55),_0x393ce7=_0xd85cbc['createBufferSource']();_0x393ce7['buffer']=_0x3fa9fb;const _0x284c57=_0xd85cbc['createGain'](),_0x16b4aa=0.3;_0x284c57[_0x28a740(0xd7,'@oGa')]['setValueAtTime'](0x0,0x0),_0x284c57['gain']['linearRampToValueAtTime'](0x1,_0x16b4aa);const _0x172290=Math['max'](0x0,_0x43f00b-_0x16b4aa);_0x43f00b<_0x16b4aa*0x2&&console['warn']('[Audio]\x20Short\x20chunk\x20('+_0x43f00b['toFixed'](0x2)+_0x28a740(0xcb,'WaP4'));_0x284c57[_0x28a740(0xd6,'^nL$')]['setValueAtTime'](0x1,_0x172290),_0x284c57[_0x28a740(0x118,'IY**')]['linearRampToValueAtTime'](0x0,_0x43f00b),_0x393ce7[_0x28a740(0xec,'KOpu')](_0x284c57)['connect'](_0xd85cbc[_0x28a740(0xaa,'qnp)')]),_0x393ce7['start'](0x0);const _0x9ca434=await _0xd85cbc[_0x28a740(0xba,'Ce%B')](),_0x30094c=_0x9ca434['getChannelData'](0x0),_0x3fa327=floatTo16BitPCM(_0x30094c),_0x23a936=encodeWAV(_0x3fa327,_0xbfdb55,0x1);return _0x23a936;}async function transcribeChunkDirectly(_0x165e85,_0x551eda){const _0x44e35f=_0x3c1d,_0x59915e=getAPIKey();if(!_0x59915e)throw new Error(_0x44e35f(0xc8,'F1&('));const _0x8e19f2=new FormData();_0x8e19f2[_0x44e35f(0x114,'*t9O')]('file',_0x165e85,'chunk_'+_0x551eda+'.wav'),_0x8e19f2['append'](_0x44e35f(0xe2,'RTS7'),'whisper-1');try{const _0x23cfa8=await fetch(_0x44e35f(0xeb,'nu8F'),{'method':_0x44e35f(0x11b,'p%Dx'),'headers':{'Authorization':'Bearer\x20'+_0x59915e},'body':_0x8e19f2});if(!_0x23cfa8['ok']){const _0x1eaaf5=await _0x23cfa8['text']();throw new Error('OpenAI\x20API\x20error:\x20'+_0x1eaaf5);}const _0x27a300=await _0x23cfa8[_0x44e35f(0xf9,'QfqT')]();return _0x27a300['text']||'';}catch(_0x394a30){return logError('Error\x20transcribing\x20chunk\x20'+_0x551eda+':',_0x394a30),_0x44e35f(0x108,'(goM')+_0x551eda+']';}}function enqueueTranscription(_0x4ad2ed,_0x316445){transcriptionQueue['push']({'chunkNum':_0x316445,'wavBlob':_0x4ad2ed}),processTranscriptionQueue();}async function processTranscriptionQueue(){const _0x2705a9=_0x3c1d;if(isProcessingQueue)return;isProcessingQueue=!![];while(transcriptionQueue['length']>0x0){const {chunkNum:_0x528699,wavBlob:_0x1d6898}=transcriptionQueue[_0x2705a9(0xf6,'c4gW')]();logInfo(_0x2705a9(0xef,'iQz&')+_0x528699+'...');const _0x46cd21=await transcribeChunkDirectly(_0x1d6898,_0x528699);transcriptChunks[_0x528699]=_0x46cd21,updateTranscriptionOutput();}isProcessingQueue=![];}async function processAudioChunkInternal(_0x45cc37=![]){const _0x3a8771=_0x3c1d;if(audioFrames[_0x3a8771(0xce,'QmXP')]===0x0){logDebug('No\x20audio\x20frames\x20to\x20process.');return;}processedAnyAudioFrames=!![],logInfo(_0x3a8771(0x10d,'9(Y]')+audioFrames['length']+'\x20audio\x20frames\x20for\x20chunk\x20'+chunkNumber+'.');const _0x420749=audioFrames;audioFrames=[];const _0x3601c3=_0x420749[0x0]['sampleRate'],_0x562347=_0x420749[0x0][_0x3a8771(0xfe,'uI]q')];let _0x5cc222=[];for(const _0x17716e of _0x420749){const _0x4c5545=_0x17716e[_0x3a8771(0xca,'WaP4')];if(_0x562347===0x1){const _0x20ae56=new Float32Array(_0x4c5545);_0x17716e['copyTo'](_0x20ae56,{'planeIndex':0x0}),_0x5cc222['push'](_0x20ae56);}else{let _0x390724=[];for(let _0x107976=0x0;_0x107976<_0x562347;_0x107976++){const _0x1cc331=new Float32Array(_0x4c5545);_0x17716e[_0x3a8771(0xff,'DT1@')](_0x1cc331,{'planeIndex':_0x107976}),_0x390724[_0x3a8771(0xe3,'@oVn')](_0x1cc331);}const _0x1f8063=new Float32Array(_0x4c5545*_0x562347);for(let _0x421c40=0x0;_0x421c40<_0x4c5545;_0x421c40++){for(let _0xb5e2b1=0x0;_0xb5e2b1<_0x562347;_0xb5e2b1++){_0x1f8063[_0x421c40*_0x562347+_0xb5e2b1]=_0x390724[_0xb5e2b1][_0x421c40];}}_0x5cc222['push'](_0x1f8063);}_0x17716e['close']();}const _0x4b9afd=_0x5cc222['reduce']((_0x51d7d5,_0x525bec)=>_0x51d7d5+_0x525bec[_0x3a8771(0x10e,'8P2p')],0x0),_0x5c180a=new Float32Array(_0x4b9afd);let _0x573f93=0x0;for(const _0x5ca083 of _0x5cc222){_0x5c180a[_0x3a8771(0xc5,'l5Iu')](_0x5ca083,_0x573f93),_0x573f93+=_0x5ca083['length'];}const _0x332fd3=await processAudioUsingOfflineContext(_0x5c180a,_0x3601c3,_0x562347);enqueueTranscription(_0x332fd3,chunkNumber),chunkNumber++;}async function safeProcessAudioChunk(_0x475e8f=![]){if(manualStop&&finalChunkProcessed){logDebug('Final\x20chunk\x20already\x20processed;\x20skipping\x20safeProcessAudioChunk.');return;}if(chunkProcessingLock){logDebug('Chunk\x20processing\x20is\x20locked;\x20skipping\x20safeProcessAudioChunk.');return;}chunkProcessingLock=!![],await processAudioChunkInternal(_0x475e8f),chunkProcessingLock=![],pendingStop&&(pendingStop=![],finalizeStop());}function finalizeStop(){const _0x109887=_0x3c1d;completionStartTime=Date['now'](),completionTimerInterval=setInterval(()=>{const _0x2e7464=document['getElementById']('transcribeTimer');_0x2e7464&&(_0x2e7464['innerText']='Completion\x20Timer:\x20'+formatTime(Date['now']()-completionStartTime));},0x3e8);const _0x4047e5=document['getElementById']('startButton'),_0x449fe3=document[_0x109887(0x117,'9(Y]')]('stopButton'),_0x16d6a7=document['getElementById'](_0x109887(0xfa,'hi)%'));if(_0x4047e5)_0x4047e5[_0x109887(0x106,'#6IG')]=![];if(_0x449fe3)_0x449fe3['disabled']=!![];if(_0x16d6a7)_0x16d6a7['disabled']=!![];logInfo('Recording\x20stopped\x20by\x20user.\x20Finalizing\x20transcription.');}function updateTranscriptionOutput(){const _0x77a128=_0x3c1d,_0x5eeeca=Object[_0x77a128(0x11d,'SZ%z')](transcriptChunks)['map'](Number)['sort']((_0x5383bb,_0x5f0f2b)=>_0x5383bb-_0x5f0f2b);let _0x2e8721='';_0x5eeeca['forEach'](_0x4e6e6c=>{_0x2e8721+=transcriptChunks[_0x4e6e6c]+'\x20';});const _0x325272=document[_0x77a128(0xf0,'HVBH')]('transcription');_0x325272&&(_0x325272['value']=_0x2e8721['trim']()),manualStop&&Object['keys'](transcriptChunks)[_0x77a128(0x125,'^nL$')]>=chunkNumber-0x1&&(clearInterval(completionTimerInterval),updateStatusMessage('Transcription\x20finished!','green'),logInfo('Transcription\x20complete.'));}function floatTo16BitPCM(_0x36ceb4){const _0x45b9b9=new Int16Array(_0x36ceb4['length']);for(let _0x36f85c=0x0;_0x36f85c<_0x36ceb4['length'];_0x36f85c++){let _0x4ffd8f=Math['max'](-0x1,Math['min'](0x1,_0x36ceb4[_0x36f85c]));_0x45b9b9[_0x36f85c]=_0x4ffd8f<0x0?_0x4ffd8f*0x8000:_0x4ffd8f*0x7fff;}return _0x45b9b9;}function encodeWAV(_0x1fa5a4,_0x2c0886,_0x17fd6e){const _0x414dc6=_0x3c1d,_0x2cbb78=new ArrayBuffer(0x2c+_0x1fa5a4['length']*0x2),_0x503114=new DataView(_0x2cbb78);function _0x377154(_0x1351cc,_0x162bda){for(let _0x4b741d=0x0;_0x4b741d<_0x162bda['length'];_0x4b741d++){_0x503114['setUint8'](_0x1351cc+_0x4b741d,_0x162bda['charCodeAt'](_0x4b741d));}}_0x377154(0x0,_0x414dc6(0xc3,'iQz&')),_0x503114[_0x414dc6(0xe1,'X$jl')](0x4,0x24+_0x1fa5a4['length']*0x2,!![]),_0x377154(0x8,_0x414dc6(0xa9,'&hZI')),_0x377154(0xc,'fmt\x20'),_0x503114[_0x414dc6(0xd2,'%555')](0x10,0x10,!![]),_0x503114[_0x414dc6(0xbc,'nu8F')](0x14,0x1,!![]),_0x503114['setUint16'](0x16,_0x17fd6e,!![]),_0x503114[_0x414dc6(0xb7,'uXee')](0x18,_0x2c0886,!![]),_0x503114[_0x414dc6(0xe0,'z%id')](0x1c,_0x2c0886*_0x17fd6e*0x2,!![]),_0x503114[_0x414dc6(0x120,'*iNz')](0x20,_0x17fd6e*0x2,!![]),_0x503114['setUint16'](0x22,0x10,!![]),_0x377154(0x24,'data'),_0x503114['setUint32'](0x28,_0x1fa5a4['length']*0x2,!![]);let _0xf07571=0x2c;for(let _0x50c8d4=0x0;_0x50c8d4<_0x1fa5a4[_0x414dc6(0xc1,'18(I')];_0x50c8d4++,_0xf07571+=0x2){_0x503114['setInt16'](_0xf07571,_0x1fa5a4[_0x50c8d4],!![]);}return new Blob([_0x503114],{'type':_0x414dc6(0xd4,'Vqqe')});}function scheduleChunk(){const _0x427fd6=_0x3c1d;if(manualStop||recordingPaused){logDebug(_0x427fd6(0xcc,'*iNz'));return;}const _0x4aaa27=Date[_0x427fd6(0x124,'*t9O')]()-chunkStartTime,_0xdcdbae=Date['now']()-lastFrameTime;_0x4aaa27>=MAX_CHUNK_DURATION||_0x4aaa27>=MIN_CHUNK_DURATION&&_0xdcdbae>=watchdogThreshold?(logInfo('Scheduling\x20condition\x20met;\x20processing\x20chunk.'),safeProcessAudioChunk(),chunkStartTime=Date['now'](),scheduleChunk()):chunkTimeoutId=setTimeout(scheduleChunk,0x1f4);}function resetRecordingState(){const _0x5914db=_0x3c1d;Object[_0x5914db(0xb0,'8P2p')](pollingIntervals)['forEach'](_0xd9f9f4=>clearInterval(_0xd9f9f4)),pollingIntervals={},clearTimeout(chunkTimeoutId),clearInterval(recordingTimerInterval),transcriptChunks={},audioFrames=[],chunkStartTime=Date['now'](),lastFrameTime=Date['now'](),manualStop=![],finalChunkProcessed=![],recordingPaused=![],groupId=Date[_0x5914db(0xc4,'nu8F')]()[_0x5914db(0xad,'QmXP')](),chunkNumber=0x1,accumulatedRecordingTime=0x0;}function initRecording(){const _0x161c4e=_0x3c1d,_0x46a58c=document['getElementById'](_0x161c4e(0x122,'$Lrm')),_0x3daaa5=document['getElementById'](_0x161c4e(0x100,'8P2p')),_0x3b9133=document['getElementById']('pauseResumeButton');if(!_0x46a58c||!_0x3daaa5||!_0x3b9133)return;_0x46a58c['addEventListener']('click',async()=>{const _0x269540=_0x161c4e,_0x20191a=getAPIKey();if(!_0x20191a||!_0x20191a[_0x269540(0x126,'z%id')]('sk-')){alert(_0x269540(0x116,'^nL$'));return;}resetRecordingState();const _0x5eaf29=document['getElementById']('transcription');if(_0x5eaf29)_0x5eaf29['value']='';updateStatusMessage('Recording...',_0x269540(0x103,'qnp)')),logInfo('Recording\x20started.');try{mediaStream=await navigator['mediaDevices']['getUserMedia']({'audio':!![]});recordingTimerInterval&&(clearInterval(recordingTimerInterval),recordingTimerInterval=null);recordingStartTime=Date['now'](),recordingTimerInterval=setInterval(updateRecordingTimer,0x3e8);const _0x1d7c7e=mediaStream['getAudioTracks']()[0x0],_0x337f66=new MediaStreamTrackProcessor({'track':_0x1d7c7e});audioReader=_0x337f66[_0x269540(0x115,'18(I')]['getReader']();function _0x4ee5dd(){const _0xa00028=_0x269540;audioReader['read']()[_0xa00028(0xab,'F1&(')](({done:_0x4b4af7,value:_0x8e7c7})=>{if(_0x4b4af7){logInfo('Audio\x20track\x20reading\x20complete.');return;}lastFrameTime=Date['now'](),audioFrames['push'](_0x8e7c7),_0x4ee5dd();})['catch'](_0x23c294=>{logError('Error\x20reading\x20audio\x20frames',_0x23c294);});}_0x4ee5dd(),scheduleChunk(),logInfo('MediaStreamTrackProcessor\x20started,\x20reading\x20audio\x20frames.'),_0x46a58c['disabled']=!![],_0x3daaa5[_0x269540(0xe8,'18(I')]=![],_0x3b9133['disabled']=![],_0x3b9133['innerText']='Pause\x20Recording';}catch(_0x4c8d16){updateStatusMessage('Microphone\x20access\x20error:\x20'+_0x4c8d16,'red'),logError('Microphone\x20access\x20error',_0x4c8d16);}}),_0x3b9133['addEventListener']('click',async()=>{const _0x5ed721=_0x161c4e;if(!mediaStream||recordingPaused)try{mediaStream=await navigator['mediaDevices']['getUserMedia']({'audio':!![]});const _0x455fcb=mediaStream[_0x5ed721(0x111,'WaP4')]()[0x0],_0x4a8d5b=new MediaStreamTrackProcessor({'track':_0x455fcb});audioReader=_0x4a8d5b['readable'][_0x5ed721(0x121,'^nL$')]();function _0x28f3ba(){const _0x46baae=_0x5ed721;audioReader['read']()['then'](({done:_0x264c24,value:_0x14d038})=>{if(_0x264c24){logInfo('Audio\x20track\x20reading\x20complete.');return;}lastFrameTime=Date['now'](),audioFrames['push'](_0x14d038),_0x28f3ba();})[_0x46baae(0xac,'DT1@')](_0x3601e8=>{logError('Error\x20reading\x20audio\x20frames',_0x3601e8);});}_0x28f3ba(),recordingPaused=![],recordingTimerInterval&&(clearInterval(recordingTimerInterval),recordingTimerInterval=null),recordingStartTime=Date['now'](),lastFrameTime=Date['now'](),recordingTimerInterval=setInterval(updateRecordingTimer,0x3e8),_0x3b9133['innerText']=_0x5ed721(0xe9,'l5Iu'),updateStatusMessage('Recording...',_0x5ed721(0xd0,'ZdJa')),chunkStartTime=Date['now'](),scheduleChunk(),logInfo('Recording\x20resumed.');}catch(_0x194175){updateStatusMessage(_0x5ed721(0x101,'FDIh')+_0x194175,_0x5ed721(0xb2,'@7&Z')),logError('Error\x20resuming\x20microphone\x20on\x20resume',_0x194175);}else{await safeProcessAudioChunk(![]),accumulatedRecordingTime+=Date['now']()-recordingStartTime,stopMicrophone(),recordingPaused=!![],clearInterval(recordingTimerInterval),clearTimeout(chunkTimeoutId),_0x3b9133['innerText']='Resume\x20Recording',updateStatusMessage('Recording\x20paused','orange'),logInfo('Recording\x20paused;\x20current\x20chunk\x20processed\x20and\x20media\x20stream\x20stopped.');const _0x33b340=document['getElementById'](_0x5ed721(0xb9,'oR%H')),_0x195c7c=document[_0x5ed721(0xc9,'e%zt')]('stopButton');if(_0x33b340)_0x33b340['disabled']=!![];if(_0x195c7c)_0x195c7c['disabled']=![];_0x3b9133['disabled']=![];}}),_0x3daaa5['addEventListener']('click',async()=>{const _0x4d2dba=_0x161c4e;updateStatusMessage(_0x4d2dba(0xee,'IY**'),'blue'),manualStop=!![],clearTimeout(chunkTimeoutId),clearInterval(recordingTimerInterval),stopMicrophone(),chunkStartTime=0x0,lastFrameTime=0x0,await new Promise(_0x52fa5b=>setTimeout(_0x52fa5b,0xc8));if(recordingPaused){finalChunkProcessed=!![];const _0x3802e8=document['getElementById'](_0x4d2dba(0xb6,'KOpu'));_0x3802e8&&(_0x3802e8['innerText']='Completion\x20Timer:\x200\x20sec');updateStatusMessage(_0x4d2dba(0xf1,'HkLY'),_0x4d2dba(0xc6,'uXee'));const _0x226c68=document['getElementById']('startButton');if(_0x226c68)_0x226c68[_0x4d2dba(0xaf,'d#wK')]=![];_0x3daaa5['disabled']=!![];const _0x577c5b=document['getElementById']('pauseResumeButton');if(_0x577c5b)_0x577c5b[_0x4d2dba(0x110,'QfqT')]=!![];logInfo(_0x4d2dba(0x102,'Ce%B'));return;}if(audioFrames['length']===0x0&&!processedAnyAudioFrames){resetRecordingState();completionTimerInterval&&(clearInterval(completionTimerInterval),completionTimerInterval=null);const _0xf5bb77=document[_0x4d2dba(0xae,'F1&(')]('transcribeTimer');_0xf5bb77&&(_0xf5bb77['innerText']=_0x4d2dba(0xb5,'$B&7'));const _0x1b9e2f=document['getElementById']('recordTimer');_0x1b9e2f&&(_0x1b9e2f[_0x4d2dba(0xea,'@oGa')]='Recording\x20Timer:\x200\x20sec');updateStatusMessage(_0x4d2dba(0x107,'@7&Z'),'green');const _0x546b02=document['getElementById'](_0x4d2dba(0xdb,'%555'));if(_0x546b02)_0x546b02[_0x4d2dba(0xbe,'QmXP')]=![];_0x3daaa5['disabled']=!![];const _0x48fd61=document['getElementById']('pauseResumeButton');if(_0x48fd61)_0x48fd61['disabled']=!![];logInfo(_0x4d2dba(0x123,'%555')),processedAnyAudioFrames=![];return;}else{if(chunkProcessingLock)pendingStop=!![],logDebug(_0x4d2dba(0xbb,'18(I'));else{await safeProcessAudioChunk(!![]);if(!processedAnyAudioFrames){resetRecordingState();completionTimerInterval&&(clearInterval(completionTimerInterval),completionTimerInterval=null);const _0x2e10f5=document['getElementById']('transcribeTimer');_0x2e10f5&&(_0x2e10f5['innerText']='Completion\x20Timer:\x200\x20sec');const _0x2c02fc=document['getElementById']('recordTimer');_0x2c02fc&&(_0x2c02fc[_0x4d2dba(0xc0,'nu8F')]=_0x4d2dba(0xda,'QfqT'));updateStatusMessage(_0x4d2dba(0xfb,'W%Q!'),'green');const _0x2dd74e=document[_0x4d2dba(0x105,'SZ%z')](_0x4d2dba(0xd8,'&hZI'));if(_0x2dd74e)_0x2dd74e['disabled']=![];_0x3daaa5['disabled']=!![];const _0x5ce7a8=document['getElementById']('pauseResumeButton');if(_0x5ce7a8)_0x5ce7a8['disabled']=!![];logInfo('No\x20audio\x20frames\x20processed\x20after\x20safeProcessAudioChunk.\x20Full\x20reset\x20performed.'),processedAnyAudioFrames=![];return;}else finalChunkProcessed=!![],finalizeStop(),logInfo(_0x4d2dba(0xb8,'WCNV'));}}});}export{initRecording};