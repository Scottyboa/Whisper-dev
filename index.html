<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title id="pageTitle">Whisper Transcription</title>
  <!-- Import Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&family=Merriweather:wght@300;400&display=swap" rel="stylesheet">
  <style>
    /* Prologue-inspired Style */
    body {
      font-family: 'Roboto', sans-serif;
      background-color: #f8f8f8;
      color: #333;
      margin: 0;
      padding: 0;
      text-align: center;
      position: relative;
    }
    header {
      background: linear-gradient(135deg, #5a9 0%, #489 100%);
      color: #fff;
      padding: 40px 20px;
      text-align: center;
    }
    header h1 {
      font-family: 'Merriweather', serif;
      font-weight: 300;
      font-size: 48px;
      margin: 0;
    }
    header p {
      font-size: 20px;
      margin-top: 10px;
    }
    .container {
      max-width: 800px;
      margin: 40px auto;
      padding: 20px;
    }
    input[type="text"] {
      width: 300px;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 10px;
      font-size: 16px;
      box-sizing: border-box;
      transition: border-color 0.3s, box-shadow 0.3s;
      margin-bottom: 20px;
    }
    input[type="text"]:focus {
      border-color: #66afe9;
      box-shadow: 0 0 8px rgba(102,175,233,0.6);
      outline: none;
    }
    button {
      background-color: #5a9;
      color: #fff;
      border: none;
      border-radius: 10px;
      padding: 12px 20px;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.1s;
      margin: 10px;
    }
    button:hover {
      background-color: #489;
    }
    button:active {
      transform: scale(0.98);
    }
    .info-box {
      background-color: #fff;
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 20px;
      margin-top: 30px;
      text-align: left;
      color: #333;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .info-box h3 {
      font-family: 'Merriweather', serif;
      font-size: 24px;
      margin-top: 0;
    }
    .info-box p, .info-box ul {
      font-size: 16px;
      line-height: 1.5;
    }
    .info-box ul {
      list-style: disc;
      margin-left: 20px;
    }
    .highlight {
      color: #5a9;
      font-weight: 500;
    }
    /* Language Selector in top-right */
    #languageSelector {
      position: absolute;
      top: 10px;
      right: 10px;
    }
    #languageSelector select {
      padding: 5px 10px;
      font-size: 14px;
      border: 1px solid #ddd;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <!-- Language Selector -->
  <div id="languageSelector">
    <select id="langSelect">
      <option value="en">English</option>
      <option value="no">Norsk</option>
    </select>
  </div>
  
  <header>
    <h1 id="headerTitle">Whisper Transcription</h1>
    <p id="headerSubtitle">Convert speech to text for professional consultations</p>
  </header>

  <div class="container">
    <p id="apiKeyPrompt">Please enter your OpenAI API key:</p>
    <input type="text" id="apiKeyInput" placeholder="Enter API Key here" autocomplete="off">
    <br>
    <button id="enterTranscriptionBtn">Enter Transcription Tool</button>
    
    <!-- Info Box with instructions -->
    <div class="info-box">
      <h3 id="infoTitle">How to Use Whisper Transcription</h3>
      <p id="infoText1">
        1. <strong>Obtain an OpenAI API Key</strong>: Sign up at 
        <a href="https://platform.openai.com/" target="_blank" class="highlight">OpenAI Platform</a> to get your API key. Add billing details and purchase tokens as needed.
      </p>
      <p id="infoText2">
        2. <strong>Cost &amp; Usage:</strong>
        <ul>
          <li>Speech-to-text (Whisper): <span class="highlight">0.006 USD per minute</span> (~0.062 NOK/min).</li>
          <li>Note generation: very low cost per note.</li>
          <li>You pay only for what you use. If you go on vacation, you pay nothing during periods of inactivity.</li>
        </ul>
      </p>
      <p id="infoText3">
        For example, if you have 20 consultations per day, each 15 minutes long, over 4 days a week for 4 weeks (320 consultations total, 4,800 minutes per month), the total cost for speech-to-text is about <span class="highlight">28.80 USD</span> (~308 NOK). Note generation adds only a small extra cost.
      </p>
      <p id="infoText4">
        3. <strong>Security &amp; Confidentiality:</strong> All recordings, transcriptions, and generated notes are automatically deleted after 15 minutes. Nothing is stored permanently—your data remains confidential and secure.
      </p>
      <p id="infoText5">
        Once you've entered your API key above, click "Enter Transcription Tool" to begin.
      </p>
    </div>
  </div>
  
  <script>
    // Language translations
    const translations = {
      en: {
        pageTitle: "Whisper Transcription",
        headerTitle: "Whisper Transcription",
        headerSubtitle: "Convert speech to text for professional consultations",
        apiKeyPrompt: "Please enter your OpenAI API key:",
        placeholderApiKey: "Enter API Key here",
        btnEnter: "Enter Transcription Tool",
        infoTitle: "How to Use Whisper Transcription",
        infoText1: "1. Obtain an OpenAI API Key: Sign up at OpenAI Platform to get your API key. Add billing details and purchase tokens as needed.",
        infoText2: "2. Cost & Usage:",
        infoText2List: [
          "Speech-to-text (Whisper): 0.006 USD per minute (~0.062 NOK/min).",
          "Note generation: very low cost per note.",
          "You pay only for what you use. If you go on vacation, you pay nothing during periods of inactivity."
        ],
        infoText3: "For example, if you have 20 consultations per day, each 15 minutes long, over 4 days a week for 4 weeks (320 consultations total, 4,800 minutes per month), the total cost for speech-to-text is about 28.80 USD (~308 NOK). Note generation adds only a small extra cost.",
        infoText4: "3. Security & Confidentiality: All recordings, transcriptions, and generated notes are automatically deleted after 15 minutes. Nothing is stored permanently—your data remains confidential and secure.",
        infoText5: "Once you've entered your API key above, click \"Enter Transcription Tool\" to begin."
      },
      no: {
        pageTitle: "Whisper Transkripsjon",
        headerTitle: "Whisper Transkripsjon",
        headerSubtitle: "Konverter tale til tekst for profesjonelle konsultasjoner",
        apiKeyPrompt: "Vennligst skriv inn din OpenAI API-nøkkel:",
        placeholderApiKey: "Skriv inn API-nøkkel her",
        btnEnter: "Gå til Transkripsjonsverktøy",
        infoTitle: "Slik bruker du Whisper Transkripsjon",
        infoText1: "1. Skaff deg en OpenAI API-nøkkel: Registrer deg på OpenAI Platform for å få din API-nøkkel. Legg til betalingsdetaljer og kjøp tokens etter behov.",
        infoText2: "2. Kostnad & Bruk:",
        infoText2List: [
          "Tale-til-tekst (Whisper): 0,006 USD per minutt (~0,062 NOK/min).",
          "Notegenerering: svært lav kostnad per notat.",
          "Du betaler kun for det du bruker. Hvis du for eksempel er på ferie, betaler du ingenting i perioden uten bruk."
        ],
        infoText3: "For eksempel, hvis du har 20 konsultasjoner per dag, hver 15 minutter lange, over 4 dager i uken i 4 uker (320 konsultasjoner totalt, 4 800 minutter per måned), blir den totale kostnaden for tale-til-tekst omtrent 28,80 USD (~308 NOK). Notegenerering koster kun litt ekstra.",
        infoText4: "3. Sikkerhet & Konfidensialitet: Alle opptak, transkripsjoner og genererte notater slettes automatisk etter 15 minutter. Ingenting lagres permanent—dine data forblir konfidensielle og sikre.",
        infoText5: "Når du har skrevet inn API-nøkkelen over, klikker du \"Gå til Transkripsjonsverktøy\" for å begynne."
      }
    };

    // Set default language if not set
    if (!localStorage.getItem("language")) {
      localStorage.setItem("language", "en");
    }
    let currentLang = localStorage.getItem("language");

    // Update language selection dropdown based on saved value
    const langSelect = document.getElementById("langSelect");
    if(langSelect) {
      langSelect.value = currentLang;
      langSelect.addEventListener("change", () => {
        currentLang = langSelect.value;
        localStorage.setItem("language", currentLang);
        updateTexts();
      });
    }

    // Function to update text content based on current language
    function updateTexts() {
      const t = translations[currentLang];
      document.getElementById("pageTitle").innerText = t.pageTitle;
      document.title = t.pageTitle;
      document.getElementById("headerTitle").innerText = t.headerTitle;
      document.getElementById("headerSubtitle").innerText = t.headerSubtitle;
      document.getElementById("apiKeyPrompt").innerText = t.apiKeyPrompt;
      document.getElementById("apiKeyInput").placeholder = t.placeholderApiKey;
      document.getElementById("enterTranscriptionBtn").innerText = t.btnEnter;
      document.getElementById("infoTitle").innerText = t.infoTitle;
      document.getElementById("infoText1").innerText = t.infoText1;
      // Build the list for infoText2
      let infoText2Content = t.infoText2 + "\n";
      t.infoText2List.forEach(item => {
        infoText2Content += "• " + item + "\n";
      });
      document.getElementById("infoText2").innerText = infoText2Content;
      document.getElementById("infoText3").innerText = t.infoText3;
      document.getElementById("infoText4").innerText = t.infoText4;
      document.getElementById("infoText5").innerText = t.infoText5;
    }

    // If on index.html, update texts now
    if(document.getElementById("headerTitle")) {
      updateTexts();
    }

    // The rest of index.html script remains the same...
    const enterTranscriptionBtn = document.getElementById("enterTranscriptionBtn");
    enterTranscriptionBtn.addEventListener("click", () => {
      const apiKey = document.getElementById("apiKeyInput").value.trim();
      if (apiKey) {
        sessionStorage.setItem("openai_api_key", apiKey);
        window.location.href = "transcribe.html";
      } else {
        alert("Please enter a valid API key.");
      }
    });
  </script>
</body>
</html>
